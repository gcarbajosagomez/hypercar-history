function addCRSFTokenToAjaxRequest(e){var n=$("meta[name='_csrf']").attr("content"),t=$("meta[name='_csrf_header']").attr("content");return e.setRequestHeader(t,n),e}function submitLoginForm(e){e?$("#main-form")[0].action="/cms/login":$("#main-form")[0].action="/cms/login/logout";var n=$("<input>").attr("type","hidden").attr("name","_csrf").val($("meta[name='_csrf']").attr("content"));$("#main-form").append(n),$("#main-form")[0].method="POST",$("#main-form").submit()}function saveEntity(e,n){bootbox.confirm(n,function(n){1==n&&$.ajax({type:"POST",url:e,data:new FormData($("#main-form")[0]),processData:!1,contentType:!1,beforeSend:function(e){addCRSFTokenToAjaxRequest(e)}}).done(function(n){document.children[0].innerHTML=n;var t=$("input[id*='.id']")[0].value,o="";o=t.length>0?"/"+t+"/edit":"/edit",window.history.pushState(null,"",e.replace("/save",o))})})}function editEntity(e,n){bootbox.confirm(n,function(n){1==n&&$.ajax({type:"POST",url:e,data:new FormData($("#main-form")[0]),processData:!1,contentType:!1,beforeSend:function(e){addCRSFTokenToAjaxRequest(e)}}).done(function(e){document.children[0].innerHTML=e})})}function setUpContactUsModal(){$("#contact-us-error-alert-span").text(""),$("#contact-us-error-alert-div").addClass("hidden"),$("#contact-us-success-alert-span").text(""),$("#contact-us-success-alert-div").addClass("hidden"),$("#contact-us-subject")[0].value="",$("#contact-us-sender-name")[0].value="",$("#contact-us-sender-email")[0].value="",$("#contact-us-message")[0].value=""}function deleteEntity(e,n){bootbox.confirm(n,function(n){1==n&&$.ajax({url:e,type:"DELETE",beforeSend:function(e){addCRSFTokenToAjaxRequest(e)}}).done(function(n){document.children[0].innerHTML=n,window.history.pushState(null,"",e.replace(/\/[0-9]{1,}\/delete/,"/edit"))})})}function deletePicture(e,n){bootbox.confirm(n,function(n){1==n&&$.ajax({url:"/cms/pictures/"+e+"/delete",type:"DELETE",dataType:"text",beforeSend:function(e){addCRSFTokenToAjaxRequest(e)}}).done(function(n){-1!==n.indexOf("successMessage : ")&&$("#"+e+"-picture-row").remove()})})}function writeCarPreviews(e){for(var n=new Array,t="",o=0;o<e.length;o++)if(o%2==0){n=new Array,n[0]=e[o],o+1<=e.length-1&&(n[1]=e[o+1]),o++;var a=e.length-(o+1)+1;t=t.concat(writeCarListRow(n,a))}$("#car-list-div")[0].innerHTML=t}function setupContentSearchEventListeners(){$("#content-search-input").keypress(function(e){13==e.which&&(e.preventDefault(),handleContentSearch($("#content-search-input")[0].value))}),$("#content-search-input").click(function(){$("#content-search-input").keypress()})}function openTechnologyStackModal(){$.ajax({url:"/technologyStack",type:"GET",beforeSend:function(e){addCRSFTokenToAjaxRequest(e)}}).done(function(e){$("#technology-stack-modal-div")[0].innerHTML=e,$("#technology-stack-modal-div").modal("show")})}