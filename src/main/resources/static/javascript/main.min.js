function addCrsfTokenToAjaxRequest(e){var t=$("meta[name='_csrf']").attr("content"),n=$("meta[name='_csrf_header']").attr("content");return e.setRequestHeader(n,t),e}function submitLoginForm(e){e?$("#main-form")[0].action="/cms/login":$("#main-form")[0].action="/cms/login/logout";var t=$("<input>").attr("type","hidden").attr("name","_csrf").val($("meta[name='_csrf']").attr("content"));$("#main-form").append(t),$("#main-form")[0].method="POST",$("#main-form").submit()}function saveEntity(e,t){bootbox.confirm(t,function(t){1==t&&$.ajax({type:"POST",url:e,data:new FormData($("#main-form")[0]),processData:!1,contentType:!1,beforeSend:function(e){e=addCrsfTokenToAjaxRequest(e)}}).done(function(t){document.children[0].innerHTML=t,$savedEntityId=$("input[id*='.id']")[0].value,$savedEntityId.length>0?$urlReplacement="/"+$savedEntityId+"/edit":$urlReplacement="/edit",window.history.pushState(null,"",e.replace("/save",$urlReplacement))})})}function editEntity(e,t){bootbox.confirm(t,function(t){1==t&&$.ajax({type:"POST",url:e,data:new FormData($("#main-form")[0]),processData:!1,contentType:!1,beforeSend:function(e){e=addCrsfTokenToAjaxRequest(e)}}).done(function(e){document.children[0].innerHTML=e})})}function setUpContactUsModal(){$("#contact-us-error-alert-span").text(""),$("#contact-us-error-alert-div").addClass("hidden"),$("#contact-us-success-alert-span").text(""),$("#contact-us-success-alert-div").addClass("hidden"),$("#contact-us-subject")[0].value="",$("#contact-us-sender-name")[0].value="",$("#contact-us-sender-email")[0].value="",$("#contact-us-message")[0].value=""}function deleteEntity(e,t){bootbox.confirm(t,function(t){1==t&&$.ajax({url:e,type:"DELETE",beforeSend:function(e){e=addCrsfTokenToAjaxRequest(e)}}).done(function(t){document.children[0].innerHTML=t,window.history.pushState(null,"",e.replace(/\/[0-9]{1,}\/delete/,"/edit"))})})}function writeCarPreviews(e){for(var t=new Array,n="",a=0;a<e.length;a++)a%2==0&&(t=new Array,t[0]=e[a],a+1<=e.length-1&&(t[1]=e[a+1]),a++,zIndex=e.length-(a+1)+1,n=n.concat(writeCarListRow(t,zIndex)));$("#car-list-div")[0].innerHTML=n}function setupContentSearchEventListeners(){$("#content-search-input").keypress(function(e){13==e.which&&(e.preventDefault(),handleContentSearch($("#content-search-input")[0].value,$("#main-form")[0]))}),$("#content-search-input").click(function(){$("#content-search-input").keypress()})}